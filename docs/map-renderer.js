(()=>{"use strict";var t={26:(t,s)=>{function i(t){return new Promise((s=>t.requestAnimationFrame(s)))}Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(t,s){let e=null,a=null;return async()=>{e=!0,a||(a=(async()=>{for(;e;)e=!1,await s(),await i(t);a=null})())}}},407:function(t,s,i){var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});const a=e(i(26)),h="ðŸš©ï¸";function o({ctx:t,text:s,x:i,y:e,textSize:a}){t.lineWidth=Math.round(.2*a),t.strokeStyle="rgba(0, 0, 0, 0.8)",t.strokeText(s,i,e),t.lineWidth=Math.round(.1*a),t.strokeStyle="white",t.strokeText(s,i,e),t.fillText(s,i,e)}s.default=class{constructor(t,s){this.window=t,this.canvas=s,this.showBiomes=!0,this.showSplat3=!0,this.showSplat4=!0,this.showRad=!0,this.showPrefabs=!0,this.biomesImg=null,this.splat3Img=null,this.splat4Img=null,this.radImg=null,this.brightness="100%",this.scale="0.1",this.signSize=200,this.prefabs=[];const i=new t.FontFace("Noto Sans","url(NotoEmoji-Regular.ttf)");i.load().then((s=>t.fonts.add(s))),this.fontFace=i.load(),this.markCoords={},this.lazyUpdater=a.default(t,(()=>this.updateImmediately()))}get width(){return Math.max(this.biomesImg?this.biomesImg.width:0,this.splat3Img?this.splat3Img.width:0,this.splat4Img?this.splat4Img.width:0)}get height(){return Math.max(this.biomesImg?this.biomesImg.height:0,this.splat3Img?this.splat3Img.height:0,this.splat4Img?this.splat4Img.height:0)}update(){this.lazyUpdater()}async updateImmediately(){this.canvas.width=this.width*this.scale,this.canvas.height=this.height*this.scale;const t=this.canvas.getContext("2d");t.scale(this.scale,this.scale),t.filter=`brightness(${this.brightness})`,this.biomesImg&&this.showBiomes&&t.drawImage(this.biomesImg,0,0,this.width,this.height),this.splat3Img&&this.showSplat3&&t.drawImage(this.splat3Img,0,0,this.width,this.height),this.splat4Img&&this.showSplat4&&t.drawImage(this.splat4Img,0,0,this.width,this.height),t.filter="none",this.radImg&&this.showRad&&(t.imageSmoothingEnabled=!1,t.drawImage(this.radImg,0,0,this.width,this.height),t.imageSmoothingEnabled=!0),this.showPrefabs&&await async function(t,s){s.font=`${t.signSize}px ${(await t.fontFace).family}`,s.fillStyle="red",s.textAlign="center",s.textBaseline="middle";const i=t.width/2,e=t.height/2,a=Math.round(.01*t.signSize),h=Math.round(.05*t.signSize);for(let n=t.prefabs.length-1;n>=0;n-=1){const l=t.prefabs[n];o({ctx:s,text:"âœ˜",x:i+l.x+a,y:e-l.y+h,textSize:t.signSize})}}(this,t),this.markCoords&&this.markCoords.x&&this.markCoords.z&&await async function(t,s){s.font=`${t.signSize}px ${(await t.fontFace).family}`,s.fillStyle="red",s.textAlign="left",s.textBaseline="alphabetic";const i=t.width/2,e=t.height/2,a=-1*Math.round(.32*t.signSize),n=-1*Math.round(.1*t.signSize),l=i+t.markCoords.x+a,r=e-t.markCoords.z+n;o({ctx:s,text:h,x:l,y:r,textSize:t.signSize}),s.strokeText(h,l,r),s.fillText(h,l,r)}(this,t)}}},496:function(t,s,i){var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});const a=e(i(407)),h=new Set(["biomesImg","splat3Img","splat4Img","radImg","showBiomes","showSplat3","showSplat4","showRad","showPrefabs","brightness","scale","signSize","prefabs","signChar","markChar","markCoords"]);let o;onmessage=t=>{const{canvas:s,...i}=t.data;s&&(o?o.canvas=s:o=new a.default(self,s)),Object.keys(i).forEach((t=>{h.has(t)&&(o[t]=i[t])})),postMessage({mapSizes:{width:o.width,height:o.height}}),o.update()}}},s={};!function i(e){var a=s[e];if(void 0!==a)return a.exports;var h=s[e]={exports:{}};return t[e].call(h.exports,h,h.exports,i),h.exports}(496)})();
//# sourceMappingURL=map-renderer.js.map